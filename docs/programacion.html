<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 11 Programación | Introducción al Análisis de Datos con R</title>
  <meta name="description" content="Este es un libro introductorio al análisis de datos con R" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 11 Programación | Introducción al Análisis de Datos con R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este es un libro introductorio al análisis de datos con R" />
  <meta name="github-repo" content="rubenfcasal/intror" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 11 Programación | Introducción al Análisis de Datos con R" />
  
  <meta name="twitter:description" content="Este es un libro introductorio al análisis de datos con R" />
  

<meta name="author" content="Rubén Fernández Casal (ruben.fcasal@udc.es)" />
<meta name="author" content="Javier Roca-Pardiñas (roca@uvigo.es)" />
<meta name="author" content="Julián Costa Bouzas (julian.costa@udc.es)" />
<meta name="author" content="Manuel Oviedo de la Fuente (manuel.oviedo@udc.es)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="regresión-no-paramétrica.html"/>
<link rel="next" href="generación-de-informes.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introducción al Análisis de Datos con R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prólogo</a></li>
<li class="chapter" data-level="1" data-path="introducción.html"><a href="introducción.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introducción.html"><a href="introducción.html#el-lenguaje-y-entorno-estadístico-r"><i class="fa fa-check"></i><b>1.1</b> El lenguaje y entorno estadístico <code>R</code></a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introducción.html"><a href="introducción.html#principales-características"><i class="fa fa-check"></i><b>1.1.1</b> Principales características</a></li>
<li class="chapter" data-level="1.1.2" data-path="introducción.html"><a href="introducción.html#interfaces-gráficas"><i class="fa fa-check"></i><b>1.1.2</b> Interfaces gráficas</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introducción.html"><a href="introducción.html#entorno-de-trabajo"><i class="fa fa-check"></i><b>1.2</b> Entorno de trabajo</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introducción.html"><a href="introducción.html#ventana-de-consola"><i class="fa fa-check"></i><b>1.2.1</b> Ventana de Consola</a></li>
<li class="chapter" data-level="1.2.2" data-path="introducción.html"><a href="introducción.html#ventana-de-script"><i class="fa fa-check"></i><b>1.2.2</b> Ventana de Script</a></li>
<li class="chapter" data-level="1.2.3" data-path="introducción.html"><a href="introducción.html#ayuda-dentro-del-programa"><i class="fa fa-check"></i><b>1.2.3</b> Ayuda dentro del programa</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introducción.html"><a href="introducción.html#librerías"><i class="fa fa-check"></i><b>1.3</b> Librerías</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="introducción.html"><a href="introducción.html#paquetes"><i class="fa fa-check"></i><b>1.3.1</b> Paquetes</a></li>
<li class="chapter" data-level="1.3.2" data-path="introducción.html"><a href="introducción.html#instalacion-pkg"><i class="fa fa-check"></i><b>1.3.2</b> Instalación</a></li>
<li class="chapter" data-level="1.3.3" data-path="introducción.html"><a href="introducción.html#carga"><i class="fa fa-check"></i><b>1.3.3</b> Carga</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introducción.html"><a href="introducción.html#una-primera-sesión"><i class="fa fa-check"></i><b>1.4</b> Una primera sesión</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="introducción.html"><a href="introducción.html#inicio-de-una-sesión"><i class="fa fa-check"></i><b>1.4.1</b> Inicio de una sesión</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introducción.html"><a href="introducción.html#objetos-básicos"><i class="fa fa-check"></i><b>1.5</b> Objetos básicos</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introducción.html"><a href="introducción.html#objetos-numéricos"><i class="fa fa-check"></i><b>1.5.1</b> Objetos numéricos</a></li>
<li class="chapter" data-level="1.5.2" data-path="introducción.html"><a href="introducción.html#objetos-tipo-carácter"><i class="fa fa-check"></i><b>1.5.2</b> Objetos tipo carácter</a></li>
<li class="chapter" data-level="1.5.3" data-path="introducción.html"><a href="introducción.html#objetos-lógicos"><i class="fa fa-check"></i><b>1.5.3</b> Objetos lógicos</a></li>
<li class="chapter" data-level="1.5.4" data-path="introducción.html"><a href="introducción.html#operadores-lógicos"><i class="fa fa-check"></i><b>1.5.4</b> Operadores lógicos</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="introducción.html"><a href="introducción.html#área-de-trabajo"><i class="fa fa-check"></i><b>1.6</b> Área de trabajo</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="introducción.html"><a href="introducción.html#guardar-y-cargar-resultados"><i class="fa fa-check"></i><b>1.6.1</b> Guardar y cargar resultados</a></li>
<li class="chapter" data-level="1.6.2" data-path="introducción.html"><a href="introducción.html#directorio-de-trabajo"><i class="fa fa-check"></i><b>1.6.2</b> Directorio de trabajo</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html"><i class="fa fa-check"></i><b>2</b> Estructuras de datos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#vectores"><i class="fa fa-check"></i><b>2.1</b> Vectores</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#generación-de-secuencias"><i class="fa fa-check"></i><b>2.1.1</b> Generación de secuencias</a></li>
<li class="chapter" data-level="2.1.2" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#generación-secuencias-aleatorias"><i class="fa fa-check"></i><b>2.1.2</b> Generación secuencias aleatorias</a></li>
<li class="chapter" data-level="2.1.3" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#selección-de-elementos-de-un-vector"><i class="fa fa-check"></i><b>2.1.3</b> Selección de elementos de un vector</a></li>
<li class="chapter" data-level="2.1.4" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#ordenación-de-vectores"><i class="fa fa-check"></i><b>2.1.4</b> Ordenación de vectores</a></li>
<li class="chapter" data-level="2.1.5" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#valores-perdidos"><i class="fa fa-check"></i><b>2.1.5</b> Valores perdidos</a></li>
<li class="chapter" data-level="2.1.6" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#vectores-no-numéricos"><i class="fa fa-check"></i><b>2.1.6</b> Vectores no numéricos</a></li>
<li class="chapter" data-level="2.1.7" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#factores"><i class="fa fa-check"></i><b>2.1.7</b> Factores</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#matrices-y-arrays"><i class="fa fa-check"></i><b>2.2</b> Matrices y arrays</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#matrices"><i class="fa fa-check"></i><b>2.2.1</b> Matrices</a></li>
<li class="chapter" data-level="2.2.2" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#nombres-en-matrices"><i class="fa fa-check"></i><b>2.2.2</b> Nombres en matrices</a></li>
<li class="chapter" data-level="2.2.3" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#acceso-a-los-elementos-de-una-matriz"><i class="fa fa-check"></i><b>2.2.3</b> Acceso a los elementos de una matriz</a></li>
<li class="chapter" data-level="2.2.4" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#ordenación-por-filas-y-columnas"><i class="fa fa-check"></i><b>2.2.4</b> Ordenación por filas y columnas</a></li>
<li class="chapter" data-level="2.2.5" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#operaciones-con-matrices-y-arrays"><i class="fa fa-check"></i><b>2.2.5</b> Operaciones con Matrices y Arrays</a></li>
<li class="chapter" data-level="2.2.6" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#ejemplos"><i class="fa fa-check"></i><b>2.2.6</b> Ejemplos</a></li>
<li class="chapter" data-level="2.2.7" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#inversión-de-una-matriz"><i class="fa fa-check"></i><b>2.2.7</b> Inversión de una matriz</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#data-frames"><i class="fa fa-check"></i><b>2.3</b> Data frames</a></li>
<li class="chapter" data-level="2.4" data-path="estructuras-de-datos.html"><a href="estructuras-de-datos.html#listas"><i class="fa fa-check"></i><b>2.4</b> Listas</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="gráficos.html"><a href="gráficos.html"><i class="fa fa-check"></i><b>3</b> Gráficos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="gráficos.html"><a href="gráficos.html#el-comando-plot"><i class="fa fa-check"></i><b>3.1</b> El comando plot</a></li>
<li class="chapter" data-level="3.2" data-path="gráficos.html"><a href="gráficos.html#funciones-gráficas-de-bajo-nivel"><i class="fa fa-check"></i><b>3.2</b> Funciones gráficas de bajo nivel</a></li>
<li class="chapter" data-level="3.3" data-path="gráficos.html"><a href="gráficos.html#ejemplos-1"><i class="fa fa-check"></i><b>3.3</b> Ejemplos</a></li>
<li class="chapter" data-level="3.4" data-path="gráficos.html"><a href="gráficos.html#parámetros-gráficos"><i class="fa fa-check"></i><b>3.4</b> Parámetros gráficos</a></li>
<li class="chapter" data-level="3.5" data-path="gráficos.html"><a href="gráficos.html#múltiples-gráficos-por-ventana"><i class="fa fa-check"></i><b>3.5</b> Múltiples gráficos por ventana</a></li>
<li class="chapter" data-level="3.6" data-path="gráficos.html"><a href="gráficos.html#exportar-gráficos"><i class="fa fa-check"></i><b>3.6</b> Exportar gráficos</a></li>
<li class="chapter" data-level="3.7" data-path="gráficos.html"><a href="gráficos.html#otras-librerías-gráficas"><i class="fa fa-check"></i><b>3.7</b> Otras librerías gráficas</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="gráficos.html"><a href="gráficos.html#ejemplos-2"><i class="fa fa-check"></i><b>3.7.1</b> Ejemplos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html"><i class="fa fa-check"></i><b>4</b> Manipulación de datos con R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html#lectura-importación-y-exportación-de-datos"><i class="fa fa-check"></i><b>4.1</b> Lectura, importación y exportación de datos</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html#formato-de-datos-de-r"><i class="fa fa-check"></i><b>4.1.1</b> Formato de datos de R</a></li>
<li class="chapter" data-level="4.1.2" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html#acceso-a-datos-en-paquetes"><i class="fa fa-check"></i><b>4.1.2</b> Acceso a datos en paquetes</a></li>
<li class="chapter" data-level="4.1.3" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html#cap4-texto"><i class="fa fa-check"></i><b>4.1.3</b> Lectura de archivos de texto</a></li>
<li class="chapter" data-level="4.1.4" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html#alternativa-tidyverse"><i class="fa fa-check"></i><b>4.1.4</b> Alternativa <code>tidyverse</code></a></li>
<li class="chapter" data-level="4.1.5" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html#importación-desde-spss"><i class="fa fa-check"></i><b>4.1.5</b> Importación desde SPSS</a></li>
<li class="chapter" data-level="4.1.6" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html#importación-desde-excel"><i class="fa fa-check"></i><b>4.1.6</b> Importación desde Excel</a></li>
<li class="chapter" data-level="4.1.7" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html#exportación-de-datos"><i class="fa fa-check"></i><b>4.1.7</b> Exportación de datos</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html#manipulación-de-datos"><i class="fa fa-check"></i><b>4.2</b> Manipulación de datos</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html#operaciones-con-variables"><i class="fa fa-check"></i><b>4.2.1</b> Operaciones con variables</a></li>
<li class="chapter" data-level="4.2.2" data-path="manipulación-de-datos-con-r.html"><a href="manipulación-de-datos-con-r.html#operaciones-con-casos"><i class="fa fa-check"></i><b>4.2.2</b> Operaciones con casos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html"><i class="fa fa-check"></i><b>5</b> Análisis exploratorio de datos</a>
<ul>
<li class="chapter" data-level="5.1" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#medidas-resumen"><i class="fa fa-check"></i><b>5.1</b> Medidas resumen</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#datos-de-ejemplo"><i class="fa fa-check"></i><b>5.1.1</b> Datos de ejemplo</a></li>
<li class="chapter" data-level="5.1.2" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#tablas-de-frecuencias"><i class="fa fa-check"></i><b>5.1.2</b> Tablas de frecuencias</a></li>
<li class="chapter" data-level="5.1.3" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#media-y-varianza"><i class="fa fa-check"></i><b>5.1.3</b> Media y varianza</a></li>
<li class="chapter" data-level="5.1.4" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#mediana-y-cuantiles"><i class="fa fa-check"></i><b>5.1.4</b> Mediana y cuantiles</a></li>
<li class="chapter" data-level="5.1.5" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#summary"><i class="fa fa-check"></i><b>5.1.5</b> <em>Summary</em></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#gráficos-1"><i class="fa fa-check"></i><b>5.2</b> Gráficos</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#diagrama-de-barras-y-gráfico-de-sectores"><i class="fa fa-check"></i><b>5.2.1</b> Diagrama de barras y gráfico de sectores</a></li>
<li class="chapter" data-level="5.2.2" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#gráfico-de-puntos"><i class="fa fa-check"></i><b>5.2.2</b> Gráfico de puntos</a></li>
<li class="chapter" data-level="5.2.3" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#árbol-de-tallo-y-hojas"><i class="fa fa-check"></i><b>5.2.3</b> Árbol de tallo y hojas</a></li>
<li class="chapter" data-level="5.2.4" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#histograma"><i class="fa fa-check"></i><b>5.2.4</b> Histograma</a></li>
<li class="chapter" data-level="5.2.5" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#gráfico-de-densidad"><i class="fa fa-check"></i><b>5.2.5</b> Gráfico de densidad</a></li>
<li class="chapter" data-level="5.2.6" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#diagrama-de-cajas"><i class="fa fa-check"></i><b>5.2.6</b> Diagrama de cajas</a></li>
<li class="chapter" data-level="5.2.7" data-path="análisis-exploratorio-de-datos.html"><a href="análisis-exploratorio-de-datos.html#gráfica-de-dispersión"><i class="fa fa-check"></i><b>5.2.7</b> Gráfica de dispersión</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="inferencia-estadística.html"><a href="inferencia-estadística.html"><i class="fa fa-check"></i><b>6</b> Inferencia estadística</a>
<ul>
<li class="chapter" data-level="6.1" data-path="inferencia-estadística.html"><a href="inferencia-estadística.html#normalidad"><i class="fa fa-check"></i><b>6.1</b> Normalidad</a></li>
<li class="chapter" data-level="6.2" data-path="inferencia-estadística.html"><a href="inferencia-estadística.html#contrastes"><i class="fa fa-check"></i><b>6.2</b> Contrastes</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="inferencia-estadística.html"><a href="inferencia-estadística.html#una-muestra"><i class="fa fa-check"></i><b>6.2.1</b> Una muestra</a></li>
<li class="chapter" data-level="6.2.2" data-path="inferencia-estadística.html"><a href="inferencia-estadística.html#dos-muestras"><i class="fa fa-check"></i><b>6.2.2</b> Dos muestras</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="inferencia-estadística.html"><a href="inferencia-estadística.html#regresión-y-correlación"><i class="fa fa-check"></i><b>6.3</b> Regresión y correlación</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="inferencia-estadística.html"><a href="inferencia-estadística.html#regresión-lineal-simple"><i class="fa fa-check"></i><b>6.3.1</b> Regresión lineal simple</a></li>
<li class="chapter" data-level="6.3.2" data-path="inferencia-estadística.html"><a href="inferencia-estadística.html#correlación"><i class="fa fa-check"></i><b>6.3.2</b> Correlación</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="inferencia-estadística.html"><a href="inferencia-estadística.html#análisis-de-la-varianza"><i class="fa fa-check"></i><b>6.4</b> Análisis de la varianza</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="inferencia-estadística.html"><a href="inferencia-estadística.html#anova-con-un-factor"><i class="fa fa-check"></i><b>6.4.1</b> ANOVA con un factor</a></li>
<li class="chapter" data-level="6.4.2" data-path="inferencia-estadística.html"><a href="inferencia-estadística.html#test-de-kruskal-wallis"><i class="fa fa-check"></i><b>6.4.2</b> Test de Kruskal-Wallis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="modelado-de-datos.html"><a href="modelado-de-datos.html"><i class="fa fa-check"></i><b>7</b> Modelado de datos</a>
<ul>
<li class="chapter" data-level="7.1" data-path="modelado-de-datos.html"><a href="modelado-de-datos.html#modelos-de-regresión"><i class="fa fa-check"></i><b>7.1</b> Modelos de regresión</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="modelado-de-datos.html"><a href="modelado-de-datos.html#herramientas-disponibles-en-r"><i class="fa fa-check"></i><b>7.1.1</b> Herramientas disponibles en <code>R</code></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="modelado-de-datos.html"><a href="modelado-de-datos.html#fórmulas"><i class="fa fa-check"></i><b>7.2</b> Fórmulas</a></li>
<li class="chapter" data-level="7.3" data-path="modelado-de-datos.html"><a href="modelado-de-datos.html#ejemplo-regresión-lineal-simple"><i class="fa fa-check"></i><b>7.3</b> Ejemplo: regresión lineal simple</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="modelos-lineales.html"><a href="modelos-lineales.html"><i class="fa fa-check"></i><b>8</b> Modelos lineales</a>
<ul>
<li class="chapter" data-level="8.1" data-path="modelos-lineales.html"><a href="modelos-lineales.html#ejemplo"><i class="fa fa-check"></i><b>8.1</b> Ejemplo</a></li>
<li class="chapter" data-level="8.2" data-path="modelos-lineales.html"><a href="modelos-lineales.html#ajuste-función-lm"><i class="fa fa-check"></i><b>8.2</b> Ajuste: función <code>lm</code></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="modelos-lineales.html"><a href="modelos-lineales.html#extracción-de-información"><i class="fa fa-check"></i><b>8.2.1</b> Extracción de información</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="modelos-lineales.html"><a href="modelos-lineales.html#predicción"><i class="fa fa-check"></i><b>8.3</b> Predicción</a></li>
<li class="chapter" data-level="8.4" data-path="modelos-lineales.html"><a href="modelos-lineales.html#selección-de-variables-explicativas"><i class="fa fa-check"></i><b>8.4</b> Selección de variables explicativas</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="modelos-lineales.html"><a href="modelos-lineales.html#búsqueda-exhaustiva"><i class="fa fa-check"></i><b>8.4.1</b> Búsqueda exhaustiva</a></li>
<li class="chapter" data-level="8.4.2" data-path="modelos-lineales.html"><a href="modelos-lineales.html#selección-por-pasos"><i class="fa fa-check"></i><b>8.4.2</b> Selección por pasos</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="modelos-lineales.html"><a href="modelos-lineales.html#regresión-con-variables-categóricas"><i class="fa fa-check"></i><b>8.5</b> Regresión con variables categóricas</a></li>
<li class="chapter" data-level="8.6" data-path="modelos-lineales.html"><a href="modelos-lineales.html#interacciones"><i class="fa fa-check"></i><b>8.6</b> Interacciones</a></li>
<li class="chapter" data-level="8.7" data-path="modelos-lineales.html"><a href="modelos-lineales.html#diagnosis-del-modelo"><i class="fa fa-check"></i><b>8.7</b> Diagnosis del modelo</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="modelos-lineales.html"><a href="modelos-lineales.html#gráficas-básicas-de-diagnóstico"><i class="fa fa-check"></i><b>8.7.1</b> Gráficas básicas de diagnóstico</a></li>
<li class="chapter" data-level="8.7.2" data-path="modelos-lineales.html"><a href="modelos-lineales.html#gráficos-parciales-de-residuos"><i class="fa fa-check"></i><b>8.7.2</b> Gráficos parciales de residuos</a></li>
<li class="chapter" data-level="8.7.3" data-path="modelos-lineales.html"><a href="modelos-lineales.html#estadísticos"><i class="fa fa-check"></i><b>8.7.3</b> Estadísticos</a></li>
<li class="chapter" data-level="8.7.4" data-path="modelos-lineales.html"><a href="modelos-lineales.html#contrastes-1"><i class="fa fa-check"></i><b>8.7.4</b> Contrastes</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="modelos-lineales.html"><a href="modelos-lineales.html#métodos-de-regularización"><i class="fa fa-check"></i><b>8.8</b> Métodos de regularización</a>
<ul>
<li class="chapter" data-level="8.8.1" data-path="modelos-lineales.html"><a href="modelos-lineales.html#datos"><i class="fa fa-check"></i><b>8.8.1</b> Datos</a></li>
<li class="chapter" data-level="8.8.2" data-path="modelos-lineales.html"><a href="modelos-lineales.html#ridge-regression"><i class="fa fa-check"></i><b>8.8.2</b> Ridge Regression</a></li>
<li class="chapter" data-level="8.8.3" data-path="modelos-lineales.html"><a href="modelos-lineales.html#lasso"><i class="fa fa-check"></i><b>8.8.3</b> Lasso</a></li>
</ul></li>
<li class="chapter" data-level="8.9" data-path="modelos-lineales.html"><a href="modelos-lineales.html#alternativas"><i class="fa fa-check"></i><b>8.9</b> Alternativas</a>
<ul>
<li class="chapter" data-level="8.9.1" data-path="modelos-lineales.html"><a href="modelos-lineales.html#transformación-modelos-linealizables"><i class="fa fa-check"></i><b>8.9.1</b> Transformación (modelos linealizables)</a></li>
<li class="chapter" data-level="8.9.2" data-path="modelos-lineales.html"><a href="modelos-lineales.html#ajuste-polinómico"><i class="fa fa-check"></i><b>8.9.2</b> Ajuste polinómico</a></li>
<li class="chapter" data-level="8.9.3" data-path="modelos-lineales.html"><a href="modelos-lineales.html#ajuste-polinómico-local-robusto"><i class="fa fa-check"></i><b>8.9.3</b> Ajuste polinómico local (robusto)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html"><i class="fa fa-check"></i><b>9</b> Modelos lineales generalizados</a>
<ul>
<li class="chapter" data-level="9.1" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#ajuste-función-glm"><i class="fa fa-check"></i><b>9.1</b> Ajuste: función <code>glm</code></a></li>
<li class="chapter" data-level="9.2" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#regresión-logística"><i class="fa fa-check"></i><b>9.2</b> Regresión logística</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#ejemplo-2"><i class="fa fa-check"></i><b>9.2.1</b> Ejemplo</a></li>
<li class="chapter" data-level="9.2.2" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#ajuste-de-un-modelo-de-regresión-logística"><i class="fa fa-check"></i><b>9.2.2</b> Ajuste de un modelo de regresión logística</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#predicción-1"><i class="fa fa-check"></i><b>9.3</b> Predicción</a></li>
<li class="chapter" data-level="9.4" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#selección-de-variables-explicativas-1"><i class="fa fa-check"></i><b>9.4</b> Selección de variables explicativas</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#selección-por-pasos-1"><i class="fa fa-check"></i><b>9.4.1</b> Selección por pasos</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#diagnosis-del-modelo-1"><i class="fa fa-check"></i><b>9.5</b> Diagnosis del modelo</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#gráficas-básicas-de-diagnóstico-1"><i class="fa fa-check"></i><b>9.5.1</b> Gráficas básicas de diagnóstico</a></li>
<li class="chapter" data-level="9.5.2" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#gráficos-parciales-de-residuos-1"><i class="fa fa-check"></i><b>9.5.2</b> Gráficos parciales de residuos</a></li>
<li class="chapter" data-level="9.5.3" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#estadísticos-1"><i class="fa fa-check"></i><b>9.5.3</b> Estadísticos</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html#alternativas-1"><i class="fa fa-check"></i><b>9.6</b> Alternativas</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regresión-no-paramétrica.html"><a href="regresión-no-paramétrica.html"><i class="fa fa-check"></i><b>10</b> Regresión no paramétrica</a>
<ul>
<li class="chapter" data-level="10.1" data-path="regresión-no-paramétrica.html"><a href="regresión-no-paramétrica.html#modelos-aditivos"><i class="fa fa-check"></i><b>10.1</b> Modelos aditivos</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="regresión-no-paramétrica.html"><a href="regresión-no-paramétrica.html#ajuste-función-gam"><i class="fa fa-check"></i><b>10.1.1</b> Ajuste: función <code>gam</code></a></li>
<li class="chapter" data-level="10.1.2" data-path="regresión-no-paramétrica.html"><a href="regresión-no-paramétrica.html#ejemplo-3"><i class="fa fa-check"></i><b>10.1.2</b> Ejemplo</a></li>
<li class="chapter" data-level="10.1.3" data-path="regresión-no-paramétrica.html"><a href="regresión-no-paramétrica.html#superficie-de-predicción"><i class="fa fa-check"></i><b>10.1.3</b> Superficie de predicción</a></li>
<li class="chapter" data-level="10.1.4" data-path="regresión-no-paramétrica.html"><a href="regresión-no-paramétrica.html#comparación-de-modelos"><i class="fa fa-check"></i><b>10.1.4</b> Comparación de modelos</a></li>
<li class="chapter" data-level="10.1.5" data-path="regresión-no-paramétrica.html"><a href="regresión-no-paramétrica.html#diagnosis-del-modelo-2"><i class="fa fa-check"></i><b>10.1.5</b> Diagnosis del modelo</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="programacion.html"><a href="programacion.html"><i class="fa fa-check"></i><b>11</b> Programación</a>
<ul>
<li class="chapter" data-level="11.1" data-path="programacion.html"><a href="programacion.html#funciones"><i class="fa fa-check"></i><b>11.1</b> Funciones</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="programacion.html"><a href="programacion.html#ejemplo-progresión-geométrica"><i class="fa fa-check"></i><b>11.1.1</b> Ejemplo: progresión geométrica</a></li>
<li class="chapter" data-level="11.1.2" data-path="programacion.html"><a href="programacion.html#argumentos-de-entrada"><i class="fa fa-check"></i><b>11.1.2</b> Argumentos de entrada</a></li>
<li class="chapter" data-level="11.1.3" data-path="programacion.html"><a href="programacion.html#salida"><i class="fa fa-check"></i><b>11.1.3</b> Salida</a></li>
<li class="chapter" data-level="11.1.4" data-path="programacion.html"><a href="programacion.html#otros-ejemplos"><i class="fa fa-check"></i><b>11.1.4</b> Otros ejemplos</a></li>
<li class="chapter" data-level="11.1.5" data-path="programacion.html"><a href="programacion.html#variables-locales-y-globales"><i class="fa fa-check"></i><b>11.1.5</b> Variables locales y globales</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="programacion.html"><a href="programacion.html#ejecución-condicional"><i class="fa fa-check"></i><b>11.2</b> Ejecución condicional</a></li>
<li class="chapter" data-level="11.3" data-path="programacion.html"><a href="programacion.html#bucles-y-vectorización"><i class="fa fa-check"></i><b>11.3</b> Bucles y vectorización</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="programacion.html"><a href="programacion.html#bucles"><i class="fa fa-check"></i><b>11.3.1</b> Bucles</a></li>
<li class="chapter" data-level="11.3.2" data-path="programacion.html"><a href="programacion.html#vectorización"><i class="fa fa-check"></i><b>11.3.2</b> Vectorización</a></li>
<li class="chapter" data-level="11.3.3" data-path="programacion.html"><a href="programacion.html#funciones-apply"><i class="fa fa-check"></i><b>11.3.3</b> Funciones <code>apply</code></a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="programacion.html"><a href="programacion.html#aplicación-validación-cruzada"><i class="fa fa-check"></i><b>11.4</b> Aplicación: validación cruzada</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="programacion.html"><a href="programacion.html#primer-ejemplo"><i class="fa fa-check"></i><b>11.4.1</b> Primer ejemplo</a></li>
<li class="chapter" data-level="11.4.2" data-path="programacion.html"><a href="programacion.html#segundo-ejemplo"><i class="fa fa-check"></i><b>11.4.2</b> Segundo ejemplo</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="generación-de-informes.html"><a href="generación-de-informes.html"><i class="fa fa-check"></i><b>12</b> Generación de informes</a>
<ul>
<li class="chapter" data-level="12.1" data-path="generación-de-informes.html"><a href="generación-de-informes.html#r-markdown"><i class="fa fa-check"></i><b>12.1</b> R Markdown</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="generación-de-informes.html"><a href="generación-de-informes.html#introducción-1"><i class="fa fa-check"></i><b>12.1.1</b> Introducción</a></li>
<li class="chapter" data-level="12.1.2" data-path="generación-de-informes.html"><a href="generación-de-informes.html#inclusión-de-código-r"><i class="fa fa-check"></i><b>12.1.2</b> Inclusión de código R</a></li>
<li class="chapter" data-level="12.1.3" data-path="generación-de-informes.html"><a href="generación-de-informes.html#inclusión-de-gráficos"><i class="fa fa-check"></i><b>12.1.3</b> Inclusión de gráficos</a></li>
<li class="chapter" data-level="12.1.4" data-path="generación-de-informes.html"><a href="generación-de-informes.html#inclusión-de-tablas"><i class="fa fa-check"></i><b>12.1.4</b> Inclusión de tablas</a></li>
<li class="chapter" data-level="12.1.5" data-path="generación-de-informes.html"><a href="generación-de-informes.html#extracción-del-código-r"><i class="fa fa-check"></i><b>12.1.5</b> Extracción del código R</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="generación-de-informes.html"><a href="generación-de-informes.html#spin"><i class="fa fa-check"></i><b>12.2</b> Spin</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i>Referencias</a>
<ul>
<li class="chapter" data-level="" data-path="referencias.html"><a href="referencias.html#bibliografía-complementaria"><i class="fa fa-check"></i>Bibliografía complementaria</a></li>
</ul></li>
<li class="appendix"><span><b>Apendices</b></span></li>
<li class="chapter" data-level="A" data-path="links.html"><a href="links.html"><i class="fa fa-check"></i><b>A</b> Enlaces</a>
<ul>
<li class="chapter" data-level="A.1" data-path="links.html"><a href="links.html#rstudio-links"><i class="fa fa-check"></i><b>A.1</b> RStudio</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="instalacion.html"><a href="instalacion.html"><i class="fa fa-check"></i><b>B</b> Instalación de R</a>
<ul>
<li class="chapter" data-level="B.1" data-path="instalacion.html"><a href="instalacion.html#instalación-de-r-en-windows"><i class="fa fa-check"></i><b>B.1</b> Instalación de R en Windows</a>
<ul>
<li class="chapter" data-level="B.1.1" data-path="instalacion.html"><a href="instalacion.html#asistente-de-instalación"><i class="fa fa-check"></i><b>B.1.1</b> Asistente de instalación</a></li>
<li class="chapter" data-level="B.1.2" data-path="instalacion.html"><a href="instalacion.html#instalación-de-paquetes"><i class="fa fa-check"></i><b>B.1.2</b> Instalación de paquetes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="interfaces.html"><a href="interfaces.html"><i class="fa fa-check"></i><b>C</b> Interfaces gráficas</a>
<ul>
<li class="chapter" data-level="C.1" data-path="interfaces.html"><a href="interfaces.html#rstudio"><i class="fa fa-check"></i><b>C.1</b> RStudio</a></li>
<li class="chapter" data-level="C.2" data-path="interfaces.html"><a href="interfaces.html#rcmdr"><i class="fa fa-check"></i><b>C.2</b> RCommander</a>
<ul>
<li class="chapter" data-level="C.2.1" data-path="interfaces.html"><a href="interfaces.html#instalación-de-r-commander"><i class="fa fa-check"></i><b>C.2.1</b> Instalación de R-Commander</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="D" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html"><i class="fa fa-check"></i><b>D</b> Manipulación de datos con dplyr</a>
<ul>
<li class="chapter" data-level="D.1" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html#el-paquete-dplyr"><i class="fa fa-check"></i><b>D.1</b> El paquete <strong>dplyr</strong></a>
<ul>
<li class="chapter" data-level="D.1.1" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html#datos-de-ejemplo-1"><i class="fa fa-check"></i><b>D.1.1</b> Datos de ejemplo</a></li>
</ul></li>
<li class="chapter" data-level="D.2" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html#operaciones-con-variables-columnas"><i class="fa fa-check"></i><b>D.2</b> Operaciones con variables (columnas)</a>
<ul>
<li class="chapter" data-level="D.2.1" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html#seleccionar-variables-con-select"><i class="fa fa-check"></i><b>D.2.1</b> Seleccionar variables con <strong>select()</strong></a></li>
<li class="chapter" data-level="D.2.2" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html#generar-nuevas-variables-con-mutate"><i class="fa fa-check"></i><b>D.2.2</b> Generar nuevas variables con <strong>mutate()</strong></a></li>
</ul></li>
<li class="chapter" data-level="D.3" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html#operaciones-con-casos-filas"><i class="fa fa-check"></i><b>D.3</b> Operaciones con casos (filas)</a>
<ul>
<li class="chapter" data-level="D.3.1" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html#seleccionar-casos-con-filter"><i class="fa fa-check"></i><b>D.3.1</b> Seleccionar casos con <strong>filter()</strong></a></li>
<li class="chapter" data-level="D.3.2" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html#organizar-casos-con-arrange"><i class="fa fa-check"></i><b>D.3.2</b> Organizar casos con <strong>arrange()</strong></a></li>
</ul></li>
<li class="chapter" data-level="D.4" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html#resumir-valores-con-summarise"><i class="fa fa-check"></i><b>D.4</b> Resumir valores con <strong>summarise()</strong></a></li>
<li class="chapter" data-level="D.5" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html#agrupar-casos-con-group_by"><i class="fa fa-check"></i><b>D.5</b> Agrupar casos con <strong>group_by()</strong></a></li>
<li class="chapter" data-level="D.6" data-path="manipulación-de-datos-con-dplyr.html"><a href="manipulación-de-datos-con-dplyr.html#operador-pipe-tubería-redirección"><i class="fa fa-check"></i><b>D.6</b> Operador <em>pipe</em> <strong>%&gt;% </strong>(tubería, redirección)</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="compañías-que-usan-r.html"><a href="compañías-que-usan-r.html"><i class="fa fa-check"></i><b>E</b> Compañías que usan <code>R</code></a>
<ul>
<li class="chapter" data-level="E.1" data-path="compañías-que-usan-r.html"><a href="compañías-que-usan-r.html#microsoft"><i class="fa fa-check"></i><b>E.1</b> Microsoft</a></li>
<li class="chapter" data-level="E.2" data-path="compañías-que-usan-r.html"><a href="compañías-que-usan-r.html#rstudio-com"><i class="fa fa-check"></i><b>E.2</b> RStudio</a></li>
</ul></li>
<li class="divider"></li>
<li><a>ISBN: 978-84-09-41823-7</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introducción al Análisis de Datos con <code>R</code></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programacion" class="section level1" number="11">
<h1><span class="header-section-number">Capítulo 11</span> Programación</h1>
<p>En este capítulo se introducirán los comandos básicos de programación en R…</p>
<div id="funciones" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Funciones</h2>
<p>El lenguaje <code>R</code> permite al usuario
definir sus propias funciones. El esquema de una función es el que
sigue:</p>
<div class="sourceCode" id="cb692"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb692-1"><a href="programacion.html#cb692-1" aria-hidden="true" tabindex="-1"></a>nombre <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, ... ) {expresión}</span></code></pre></div>
<ul>
<li><p>En la expresión anterior <code>arg1, arg2, ...</code> son los
argumentos de entrada (también llamados parámetros).</p></li>
<li><p>La <code>expresión</code> está compuesta de comandos que utilizan los
argumentos de entrada para dar la <strong>salida</strong> deseada.</p></li>
<li><p>La salida de una función puese ser un número, un vector, una
grafica, un mensaje, etc.</p></li>
</ul>
<div id="ejemplo-progresión-geométrica" class="section level3" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> Ejemplo: progresión geométrica</h3>
<p>Para introducirnos en las
funciones, vamos a escribir una función que permita trabajar con las
llamadas <strong>progresiones geométricas</strong>.</p>
<p>Una progresión geométrica es una sucesión de números <span class="math inline">\(a_1, a_2, a_3\ldots\)</span>
tales que cada uno de ellos (salvo el primero) es igual al anterior
multiplicado por una constante llamada <strong>razón</strong>, que representaremos
por <span class="math inline">\(r\)</span>. Ejemplos:</p>
<ul>
<li><p><span class="math inline">\(a_1=1\)</span>, <span class="math inline">\(r=2\)</span>:</p>
<p>1, 2, 4, 8, 16,…</p></li>
<li><p><span class="math inline">\(a_1=-1\)</span>, <span class="math inline">\(r=-2\)</span>:</p>
<p>1, -2, 4, -8, 16,…</p></li>
</ul>
<p>Según la definición anterior, se verifica que:
<span class="math display">\[a_2=a_1\cdot r; \quad a_3=a_2\cdot r=a_1\cdot r^2; \quad ...\]</span> y
generalizando este proceso se obtiene el llamado término general:</p>
<p><span class="math display">\[a_n=a_1\cdot r^{n-1}\]</span></p>
<p>También se puede comprobar que la suma de los <span class="math inline">\(n\)</span> términos de la
progresión es:</p>
<p><span class="math display">\[S_n=a_1+\ldots_+a_n=\frac{a_1(r^n-1)}{r-1}\]</span></p>
<p>La siguiente función, que llamaremos <code>an</code> calcula el término
<span class="math inline">\(a_n\)</span> de una progresión geométrica pasando como entrada el primer
elemento <code>a1</code>, la razón <code>r</code> y el valor <code>n</code>:</p>
<div class="sourceCode" id="cb693"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb693-1"><a href="programacion.html#cb693-1" aria-hidden="true" tabindex="-1"></a>an <span class="ot">&lt;-</span> <span class="cf">function</span>(a1, r, n) {</span>
<span id="cb693-2"><a href="programacion.html#cb693-2" aria-hidden="true" tabindex="-1"></a>        a1 <span class="sc">*</span> r<span class="sc">^</span>(n <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb693-3"><a href="programacion.html#cb693-3" aria-hidden="true" tabindex="-1"></a>      }</span></code></pre></div>
<p>A continuación algún ejemplo para comprobar su funcionamiento:</p>
<div class="sourceCode" id="cb694"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb694-1"><a href="programacion.html#cb694-1" aria-hidden="true" tabindex="-1"></a><span class="fu">an</span>(<span class="at">a1 =</span> <span class="dv">1</span>, <span class="at">r =</span> <span class="dv">2</span>, <span class="at">n =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 16</code></pre>
<div class="sourceCode" id="cb696"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb696-1"><a href="programacion.html#cb696-1" aria-hidden="true" tabindex="-1"></a><span class="fu">an</span>(<span class="at">a1 =</span> <span class="dv">4</span>, <span class="at">r =</span> <span class="sc">-</span><span class="dv">2</span>, <span class="at">n =</span> <span class="dv">6</span>)</span></code></pre></div>
<pre><code>## [1] -128</code></pre>
<div class="sourceCode" id="cb698"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb698-1"><a href="programacion.html#cb698-1" aria-hidden="true" tabindex="-1"></a><span class="fu">an</span>(<span class="at">a1 =</span> <span class="sc">-</span><span class="dv">50</span>, <span class="at">r =</span> <span class="dv">4</span>, <span class="at">n =</span> <span class="dv">6</span>)</span></code></pre></div>
<pre><code>## [1] -51200</code></pre>
<p>Con la función anterior se pueden obtener, con una sola llamada, varios valores de
la progresión:</p>
<div class="sourceCode" id="cb700"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb700-1"><a href="programacion.html#cb700-1" aria-hidden="true" tabindex="-1"></a><span class="fu">an</span>(<span class="at">a1 =</span> <span class="dv">1</span>, <span class="at">r =</span> <span class="dv">2</span>, <span class="at">n =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)    <span class="co"># a1, ..., a5</span></span></code></pre></div>
<pre><code>## [1]  1  2  4  8 16</code></pre>
<div class="sourceCode" id="cb702"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb702-1"><a href="programacion.html#cb702-1" aria-hidden="true" tabindex="-1"></a><span class="fu">an</span>(<span class="at">a1 =</span> <span class="dv">1</span>, <span class="at">r =</span> <span class="dv">2</span>, <span class="at">n =</span> <span class="dv">10</span><span class="sc">:</span><span class="dv">15</span>)  <span class="co"># a10, ..., a15</span></span></code></pre></div>
<pre><code>## [1]   512  1024  2048  4096  8192 16384</code></pre>
<p>La función <code>Sn</code> calcula la suma de los primeros <code>n</code>
elementos de la progresión:</p>
<div class="sourceCode" id="cb704"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb704-1"><a href="programacion.html#cb704-1" aria-hidden="true" tabindex="-1"></a>Sn <span class="ot">&lt;-</span> <span class="cf">function</span>(a1, r, n) {</span>
<span id="cb704-2"><a href="programacion.html#cb704-2" aria-hidden="true" tabindex="-1"></a>        a1 <span class="sc">*</span> (r<span class="sc">^</span>n <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> (r <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb704-3"><a href="programacion.html#cb704-3" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb704-4"><a href="programacion.html#cb704-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb704-5"><a href="programacion.html#cb704-5" aria-hidden="true" tabindex="-1"></a><span class="fu">Sn</span>(<span class="at">a1 =</span> <span class="dv">1</span>, <span class="at">r =</span> <span class="dv">2</span>, <span class="at">n =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 31</code></pre>
<div class="sourceCode" id="cb706"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb706-1"><a href="programacion.html#cb706-1" aria-hidden="true" tabindex="-1"></a><span class="fu">an</span>(<span class="at">a1 =</span> <span class="dv">1</span>, <span class="at">r =</span> <span class="dv">2</span>, <span class="at">n =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)    <span class="co"># Valores de la progresión</span></span></code></pre></div>
<pre><code>## [1]  1  2  4  8 16</code></pre>
<div class="sourceCode" id="cb708"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb708-1"><a href="programacion.html#cb708-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sn</span>(<span class="at">a1 =</span> <span class="dv">1</span>, <span class="at">r =</span> <span class="dv">2</span>, <span class="at">n =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)    <span class="co"># Suma de los valores</span></span></code></pre></div>
<pre><code>## [1]  1  3  7 15 31</code></pre>
<div class="sourceCode" id="cb710"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb710-1"><a href="programacion.html#cb710-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cumsum(an(a1 = 1, r = 2, n = 1:5))</span></span></code></pre></div>
</div>
<div id="argumentos-de-entrada" class="section level3" number="11.1.2">
<h3><span class="header-section-number">11.1.2</span> Argumentos de entrada</h3>
<p>Como ya hemos comentado, los
argumentos son los valores de entrada de una función.</p>
<ul>
<li><p>Por ejemplo, en la función anterior:</p>
<div class="sourceCode" id="cb711"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb711-1"><a href="programacion.html#cb711-1" aria-hidden="true" tabindex="-1"></a>an <span class="ot">&lt;-</span> <span class="cf">function</span>(a1, r, n) {a1 <span class="sc">*</span> r<span class="sc">^</span>(n <span class="sc">-</span> <span class="dv">1</span>)}</span></code></pre></div>
<p>los argumentos de entrada son <code>a1</code>, <code>r</code> y <code>n</code>.</p></li>
</ul>
<p>Veamos alguna consideración sobre los argumentos:</p>
<ul>
<li><p>No es necesario utilizar el nombre de los argumentos. En este caso
es obligatorio mantener el orden de entrada.
Por ejemplo, las siguientes llamadas son equivalentes:</p>
<div class="sourceCode" id="cb712"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb712-1"><a href="programacion.html#cb712-1" aria-hidden="true" tabindex="-1"></a><span class="fu">an</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 16</code></pre>
<div class="sourceCode" id="cb714"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb714-1"><a href="programacion.html#cb714-1" aria-hidden="true" tabindex="-1"></a><span class="fu">an</span>(<span class="at">a1 =</span> <span class="dv">1</span>, <span class="at">r =</span> <span class="dv">2</span>, <span class="at">n =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 16</code></pre></li>
<li><p>Si se nombran los argumentos, se pueden pasar en cualquier orden:</p>
<div class="sourceCode" id="cb716"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb716-1"><a href="programacion.html#cb716-1" aria-hidden="true" tabindex="-1"></a><span class="fu">an</span>(<span class="at">r =</span> <span class="dv">2</span>, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">a1 =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 16</code></pre>
<div class="sourceCode" id="cb718"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb718-1"><a href="programacion.html#cb718-1" aria-hidden="true" tabindex="-1"></a><span class="fu">an</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">r =</span> <span class="dv">2</span>, <span class="at">a1 =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 16</code></pre></li>
</ul>
<div id="argumentos-por-defecto" class="section level4" number="11.1.2.1">
<h4><span class="header-section-number">11.1.2.1</span> Argumentos por defecto</h4>
<p>En muchas ocasiones
resulta muy interesante que las funciones tengan argumentos por defecto.</p>
<p>Por ejemplo, si se quiere que en una función:</p>
<div class="sourceCode" id="cb720"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb720-1"><a href="programacion.html#cb720-1" aria-hidden="true" tabindex="-1"></a>nombre <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, arg2, arg3, arg4, ...) { expresión }</span></code></pre></div>
<p>los argumento <code>arg2</code> y <code>arg3</code> tomen por defecto los valores <code>a</code> y <code>b</code>
respectivamentebastaría con escribir:</p>
<div class="sourceCode" id="cb721"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb721-1"><a href="programacion.html#cb721-1" aria-hidden="true" tabindex="-1"></a>nombre <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, <span class="at">arg2 =</span> a, <span class="at">arg3 =</span> b, arg4, ...) { expresión }</span></code></pre></div>
<p>Para comprender mejor esto considérese el siguiente ejemplo ilustrativo:</p>
<div class="sourceCode" id="cb722"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb722-1"><a href="programacion.html#cb722-1" aria-hidden="true" tabindex="-1"></a>xy2 <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">y =</span> <span class="dv">3</span>) { x <span class="sc">*</span> y<span class="sc">^</span><span class="dv">2</span> }</span>
<span id="cb722-2"><a href="programacion.html#cb722-2" aria-hidden="true" tabindex="-1"></a><span class="fu">xy2</span>()</span></code></pre></div>
<pre><code>## [1] 18</code></pre>
<div class="sourceCode" id="cb724"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb724-1"><a href="programacion.html#cb724-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xy2</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 16</code></pre>
<div class="sourceCode" id="cb726"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb726-1"><a href="programacion.html#cb726-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xy2</span>(<span class="at">y =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 32</code></pre>
</div>
<div id="el-argumento-..." class="section level4" number="11.1.2.2">
<h4><span class="header-section-number">11.1.2.2</span> El argumento <code>...</code></h4>
<p>El argumento “<code>...</code>” permite
pasar de manera “libre” argumentos adicionales para ser utilizados por otra “subfunción”
dentro de la función principal.</p>
<p>Por ejemplo, en la función:</p>
<div class="sourceCode" id="cb728"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb728-1"><a href="programacion.html#cb728-1" aria-hidden="true" tabindex="-1"></a>Density.Plot <span class="ot">&lt;-</span> <span class="cf">function</span>(datos, ...) { <span class="fu">plot</span>(<span class="fu">density</span>(datos), ...) }</span></code></pre></div>
<p>a partir del primer argumento, los argumentos se incluirán en <code>...</code>
y serán utilizados por la función <code>plot</code>.</p>
<div class="sourceCode" id="cb729"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb729-1"><a href="programacion.html#cb729-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(cars)</span>
<span id="cb729-2"><a href="programacion.html#cb729-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Density.Plot</span>(cars<span class="sc">$</span>speed)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-14-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb730"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb730-1"><a href="programacion.html#cb730-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Density.Plot</span>(cars<span class="sc">$</span>speed, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>, <span class="at">xlab =</span> <span class="st">&quot;velocidad&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;distancia&quot;</span>)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-14-2.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Los argumentos de entrada de una función se obtienen ejecutando <code>args(funcion)</code>:</p>
<div class="sourceCode" id="cb731"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb731-1"><a href="programacion.html#cb731-1" aria-hidden="true" tabindex="-1"></a><span class="fu">args</span>(an)</span></code></pre></div>
<pre><code>## function (a1, r, n) 
## NULL</code></pre>
<div class="sourceCode" id="cb733"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb733-1"><a href="programacion.html#cb733-1" aria-hidden="true" tabindex="-1"></a><span class="fu">args</span>(xy2)</span></code></pre></div>
<pre><code>## function (x = 2, y = 3) 
## NULL</code></pre>
<div class="sourceCode" id="cb735"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb735-1"><a href="programacion.html#cb735-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">args</span>(Density.Plot))</span></code></pre></div>
<pre><code>## function (datos, ...)</code></pre>
<p>Por otro lado, al escribir el nombre de una función se obtiene su
contenido:</p>
<div class="sourceCode" id="cb737"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb737-1"><a href="programacion.html#cb737-1" aria-hidden="true" tabindex="-1"></a>an</span></code></pre></div>
<pre><code>## function(a1, r, n) {
##         a1 * r^(n - 1)
##       }
## &lt;bytecode: 0x0000000019bc75c8&gt;</code></pre>
</div>
</div>
<div id="salida" class="section level3" number="11.1.3">
<h3><span class="header-section-number">11.1.3</span> Salida</h3>
<p>El valor que devolverá una función será:</p>
<ul>
<li><p>el último objeto evaluado dentro de ella, o</p></li>
<li><p>lo indicado dentro de la sentencia <code>return</code>.</p></li>
</ul>
<p>Como las funciones pueden devolver objetos de varios tipos es hatibual
que la salida sea una lista.</p>
<div class="sourceCode" id="cb739"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb739-1"><a href="programacion.html#cb739-1" aria-hidden="true" tabindex="-1"></a>an <span class="ot">&lt;-</span> <span class="cf">function</span>(a1, r, n) { a1 <span class="sc">*</span> r<span class="sc">^</span>(n <span class="sc">-</span> <span class="dv">1</span>) }</span>
<span id="cb739-2"><a href="programacion.html#cb739-2" aria-hidden="true" tabindex="-1"></a>Sn <span class="ot">&lt;-</span> <span class="cf">function</span>(a1, r, n) { a1 <span class="sc">*</span> (r<span class="sc">^</span>n <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">/</span> (r <span class="sc">-</span> <span class="dv">1</span>) }</span>
<span id="cb739-3"><a href="programacion.html#cb739-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb739-4"><a href="programacion.html#cb739-4" aria-hidden="true" tabindex="-1"></a>asn <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">a1 =</span> <span class="dv">1</span>, <span class="at">r =</span> <span class="dv">2</span>, <span class="at">n =</span> <span class="dv">5</span>) {</span>
<span id="cb739-5"><a href="programacion.html#cb739-5" aria-hidden="true" tabindex="-1"></a>  A <span class="ot">&lt;-</span> <span class="fu">an</span>(a1, r, n)</span>
<span id="cb739-6"><a href="programacion.html#cb739-6" aria-hidden="true" tabindex="-1"></a>  S <span class="ot">&lt;-</span> <span class="fu">Sn</span>(a1, r, n)</span>
<span id="cb739-7"><a href="programacion.html#cb739-7" aria-hidden="true" tabindex="-1"></a>  ii <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span>n</span>
<span id="cb739-8"><a href="programacion.html#cb739-8" aria-hidden="true" tabindex="-1"></a>  AA <span class="ot">&lt;-</span> <span class="fu">an</span>(a1, r, ii)</span>
<span id="cb739-9"><a href="programacion.html#cb739-9" aria-hidden="true" tabindex="-1"></a>  SS <span class="ot">&lt;-</span> <span class="fu">Sn</span>(a1, r, ii)</span>
<span id="cb739-10"><a href="programacion.html#cb739-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">an =</span> A, <span class="at">Sn =</span> S, <span class="at">salida =</span> <span class="fu">data.frame</span>(<span class="at">valores =</span> AA, <span class="at">suma =</span> SS)))</span>
<span id="cb739-11"><a href="programacion.html#cb739-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>La función <code>asn</code> utiliza las funiones <code>an</code> y <code>Sn</code>
programadas antes y devuelve como salida una lista con las siguientes
componentes:</p>
<ul>
<li><code>an</code>: valor de <span class="math inline">\(a_n\)</span></li>
<li><code>Sn</code>: valor de <span class="math inline">\(S_n\)</span></li>
<li><code>salida</code>: data.frame con dos variables
<ul>
<li><code>salida</code>: vector con las <span class="math inline">\(n\)</span> primeras componentes de la
progresión</li>
<li><code>suma</code>: suma de las <span class="math inline">\(n\)</span> primeras componentes</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb740"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb740-1"><a href="programacion.html#cb740-1" aria-hidden="true" tabindex="-1"></a><span class="fu">asn</span>()</span></code></pre></div>
<pre><code>## $an
## [1] 16
## 
## $Sn
## [1] 31
## 
## $salida
##   valores suma
## 1       1    1
## 2       2    3
## 3       4    7
## 4       8   15
## 5      16   31</code></pre>
<p>La salida de la función anterior es una lista y se puede
acceder a los elementos de la misma:</p>
<div class="sourceCode" id="cb742"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb742-1"><a href="programacion.html#cb742-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">asn</span>()</span>
<span id="cb742-2"><a href="programacion.html#cb742-2" aria-hidden="true" tabindex="-1"></a>res<span class="sc">$</span>an</span></code></pre></div>
<pre><code>## [1] 16</code></pre>
<div class="sourceCode" id="cb744"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb744-1"><a href="programacion.html#cb744-1" aria-hidden="true" tabindex="-1"></a>res<span class="sc">$</span>Sn</span></code></pre></div>
<pre><code>## [1] 31</code></pre>
<div class="sourceCode" id="cb746"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb746-1"><a href="programacion.html#cb746-1" aria-hidden="true" tabindex="-1"></a>res<span class="sc">$</span>salida</span></code></pre></div>
<pre><code>##   valores suma
## 1       1    1
## 2       2    3
## 3       4    7
## 4       8   15
## 5      16   31</code></pre>
</div>
<div id="otros-ejemplos" class="section level3" number="11.1.4">
<h3><span class="header-section-number">11.1.4</span> Otros ejemplos</h3>
<div id="ejemplo-letra-del-dni" class="section level4" number="11.1.4.1">
<h4><span class="header-section-number">11.1.4.1</span> Ejemplo: letra del DNI</h4>
<p>A continuación se
calculará la letra del DNI a partir de su correspondiente número. El
método utilizado para obtener la letra del DNI consiste en dividir el
número entre 23 y según el resto obtenido adjudicar la letra que figura
en la siguiente tabla:</p>
<table>
<thead>
<tr class="header">
<th>resto</th>
<th>letra</th>
<th></th>
<th>resto</th>
<th>letra</th>
<th></th>
<th>resto</th>
<th>letra</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0</td>
<td>T</td>
<td></td>
<td>8</td>
<td>P</td>
<td></td>
<td>16</td>
<td>Q</td>
</tr>
<tr class="even">
<td>1</td>
<td>R</td>
<td></td>
<td>9</td>
<td>D</td>
<td></td>
<td>17</td>
<td>V</td>
</tr>
<tr class="odd">
<td>2</td>
<td>W</td>
<td></td>
<td>10</td>
<td>X</td>
<td></td>
<td>18</td>
<td>H</td>
</tr>
<tr class="even">
<td>3</td>
<td>A</td>
<td></td>
<td>11</td>
<td>B</td>
<td></td>
<td>19</td>
<td>L</td>
</tr>
<tr class="odd">
<td>4</td>
<td>G</td>
<td></td>
<td>12</td>
<td>N</td>
<td></td>
<td>20</td>
<td>C</td>
</tr>
<tr class="even">
<td>5</td>
<td>M</td>
<td></td>
<td>13</td>
<td>J</td>
<td></td>
<td>21</td>
<td>K</td>
</tr>
<tr class="odd">
<td>6</td>
<td>Y</td>
<td></td>
<td>14</td>
<td>Z</td>
<td></td>
<td>22</td>
<td>E</td>
</tr>
<tr class="even">
<td>7</td>
<td>F</td>
<td></td>
<td>15</td>
<td>S</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>La siguiente función permite obtener la letra del DNI:</p>
<div class="sourceCode" id="cb748"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb748-1"><a href="programacion.html#cb748-1" aria-hidden="true" tabindex="-1"></a>DNI <span class="ot">&lt;-</span> <span class="cf">function</span>(numero) {</span>
<span id="cb748-2"><a href="programacion.html#cb748-2" aria-hidden="true" tabindex="-1"></a>  letras <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;T&quot;</span>, <span class="st">&quot;R&quot;</span>, <span class="st">&quot;W&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;G&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;F&quot;</span>, </span>
<span id="cb748-3"><a href="programacion.html#cb748-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;P&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;N&quot;</span>, <span class="st">&quot;J&quot;</span>, <span class="st">&quot;Z&quot;</span>, <span class="st">&quot;S&quot;</span>, </span>
<span id="cb748-4"><a href="programacion.html#cb748-4" aria-hidden="true" tabindex="-1"></a>              <span class="st">&quot;Q&quot;</span>, <span class="st">&quot;V&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;L&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;K&quot;</span>, <span class="st">&quot;E&quot;</span>)</span>
<span id="cb748-5"><a href="programacion.html#cb748-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(letras[numero <span class="sc">%%</span> <span class="dv">23</span> <span class="sc">+</span> <span class="dv">1</span>]) </span>
<span id="cb748-6"><a href="programacion.html#cb748-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb748-7"><a href="programacion.html#cb748-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-8"><a href="programacion.html#cb748-8" aria-hidden="true" tabindex="-1"></a><span class="fu">DNI</span>(<span class="dv">50247828</span>)</span></code></pre></div>
<pre><code>## [1] &quot;G&quot;</code></pre>
</div>
<div id="ejemplo-simulación-del-lanzamiento-de-un-dado" class="section level4" number="11.1.4.2">
<h4><span class="header-section-number">11.1.4.2</span> Ejemplo: simulación del lanzamiento de un dado</h4>
<p>La siguiente función simula <span class="math inline">\(n\)</span> (por defecto <span class="math inline">\(n=100\)</span>) lanzamientos de un
dado. La función devuelve la tabla de frecuencias y realiza el
correspondiente gráfico:</p>
<div class="sourceCode" id="cb750"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb750-1"><a href="programacion.html#cb750-1" aria-hidden="true" tabindex="-1"></a>dado <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">n =</span> <span class="dv">100</span>) {</span>
<span id="cb750-2"><a href="programacion.html#cb750-2" aria-hidden="true" tabindex="-1"></a>  lanzamientos <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, n, <span class="at">rep =</span> <span class="cn">TRUE</span>)</span>
<span id="cb750-3"><a href="programacion.html#cb750-3" aria-hidden="true" tabindex="-1"></a>  frecuencias <span class="ot">&lt;-</span> <span class="fu">table</span>(lanzamientos) <span class="sc">/</span> n</span>
<span id="cb750-4"><a href="programacion.html#cb750-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">barplot</span>(frecuencias, <span class="at">main =</span> <span class="fu">paste</span>(<span class="st">&quot;Número de lanzamientos=&quot;</span>, n))</span>
<span id="cb750-5"><a href="programacion.html#cb750-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">abline</span>(<span class="at">h =</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">6</span>, <span class="at">col =</span> <span class="st">&#39;red&#39;</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb750-6"><a href="programacion.html#cb750-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(frecuencias)</span>
<span id="cb750-7"><a href="programacion.html#cb750-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>A continuación se muestran los resultados obtenidos para
varias simulaciones:</p>
<div class="sourceCode" id="cb751"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb751-1"><a href="programacion.html#cb751-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dado</span>(<span class="dv">100</span>)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-23-1.png" width="70%" style="display: block; margin: auto;" /></p>
<pre><code>## lanzamientos
##    1    2    3    4    5    6 
## 0.14 0.24 0.16 0.13 0.16 0.17</code></pre>
<div class="sourceCode" id="cb753"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb753-1"><a href="programacion.html#cb753-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dado</span>(<span class="dv">500</span>)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-23-2.png" width="70%" style="display: block; margin: auto;" /></p>
<pre><code>## lanzamientos
##     1     2     3     4     5     6 
## 0.184 0.158 0.152 0.176 0.172 0.158</code></pre>
<div class="sourceCode" id="cb755"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb755-1"><a href="programacion.html#cb755-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dado</span>(<span class="dv">10000</span>)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-23-3.png" width="70%" style="display: block; margin: auto;" /></p>
<pre><code>## lanzamientos
##      1      2      3      4      5      6 
## 0.1600 0.1731 0.1728 0.1666 0.1667 0.1608</code></pre>
<p>Se puede comprobar que al aumentar el valor de <span class="math inline">\(n\)</span> las frecuencias se
aproximan al valor teórico <span class="math inline">\(1/6=0.1667\)</span>.</p>
</div>
</div>
<div id="variables-locales-y-globales" class="section level3" number="11.1.5">
<h3><span class="header-section-number">11.1.5</span> Variables locales y globales</h3>
<p>En <code>R</code> no es
necesario declarar las variables usadas dentro de una función. Se
utiliza la regla llamada “ámbito lexicográfico” para decidir si un
objeto es local a una función o global.</p>
<p>Para entender mejor esto se consideran los siguientes ejemplos:</p>
<div class="sourceCode" id="cb757"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb757-1"><a href="programacion.html#cb757-1" aria-hidden="true" tabindex="-1"></a>fun <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">print</span>(x)</span>
<span id="cb757-2"><a href="programacion.html#cb757-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb757-3"><a href="programacion.html#cb757-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fun</span>()</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>La variable <code>x</code> no está definida dentro de <code>fun</code>, así que <code>R</code> busca
<code>x</code> en el entorno en el que se llamó a la función e imprimirá su valor.</p>
<p>Si <code>x</code> es utilizado como el nombre de un objeto dentro de la
función, el valor de <code>x</code> en el ambiente global (fuera de la función) no
cambia.</p>
<div class="sourceCode" id="cb759"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb759-1"><a href="programacion.html#cb759-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb759-2"><a href="programacion.html#cb759-2" aria-hidden="true" tabindex="-1"></a>fun2 <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb759-3"><a href="programacion.html#cb759-3" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb759-4"><a href="programacion.html#cb759-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(x)</span>
<span id="cb759-5"><a href="programacion.html#cb759-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb759-6"><a href="programacion.html#cb759-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb759-7"><a href="programacion.html#cb759-7" aria-hidden="true" tabindex="-1"></a><span class="fu">fun2</span>()</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb761"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb761-1"><a href="programacion.html#cb761-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Para que el valor “global” de una variable pueda ser cambidado dentro de
una función se utiliza la doble asignación <code>&lt;&lt;-</code>.</p>
<div class="sourceCode" id="cb763"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb763-1"><a href="programacion.html#cb763-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb763-2"><a href="programacion.html#cb763-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb763-3"><a href="programacion.html#cb763-3" aria-hidden="true" tabindex="-1"></a>fun2 <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb763-4"><a href="programacion.html#cb763-4" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb763-5"><a href="programacion.html#cb763-5" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;&lt;-</span> <span class="dv">5</span></span>
<span id="cb763-6"><a href="programacion.html#cb763-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(x)</span>
<span id="cb763-7"><a href="programacion.html#cb763-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(y)</span>
<span id="cb763-8"><a href="programacion.html#cb763-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb763-9"><a href="programacion.html#cb763-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb763-10"><a href="programacion.html#cb763-10" aria-hidden="true" tabindex="-1"></a><span class="fu">fun2</span>()</span></code></pre></div>
<pre><code>## [1] 2
## [1] 5</code></pre>
<div class="sourceCode" id="cb765"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb765-1"><a href="programacion.html#cb765-1" aria-hidden="true" tabindex="-1"></a>x <span class="co"># No cambió su valor</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb767"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb767-1"><a href="programacion.html#cb767-1" aria-hidden="true" tabindex="-1"></a>y <span class="co"># Cambió su valor</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
</div>
</div>
<div id="ejecución-condicional" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Ejecución condicional</h2>
<p>Para hacer ejecuciones
condicionales de código se usa el comando <code>if</code> con sintaxis:</p>
<div class="sourceCode" id="cb769"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb769-1"><a href="programacion.html#cb769-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (condicion1) {expresión1} <span class="cf">else</span> {expresión2}</span></code></pre></div>
<p>La siguiente función comprueba si un número es múltiplo de dos:</p>
<div class="sourceCode" id="cb770"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb770-1"><a href="programacion.html#cb770-1" aria-hidden="true" tabindex="-1"></a>multiplo2 <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb770-2"><a href="programacion.html#cb770-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb770-3"><a href="programacion.html#cb770-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(x,<span class="st">&#39;es múltiplo de dos&#39;</span>))</span>
<span id="cb770-4"><a href="programacion.html#cb770-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb770-5"><a href="programacion.html#cb770-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(x,<span class="st">&#39;no es múltiplo de dos&#39;</span>))</span>
<span id="cb770-6"><a href="programacion.html#cb770-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb770-7"><a href="programacion.html#cb770-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb770-8"><a href="programacion.html#cb770-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb770-9"><a href="programacion.html#cb770-9" aria-hidden="true" tabindex="-1"></a><span class="fu">multiplo2</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] &quot;5 no es múltiplo de dos&quot;</code></pre>
<div class="sourceCode" id="cb772"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb772-1"><a href="programacion.html#cb772-1" aria-hidden="true" tabindex="-1"></a><span class="fu">multiplo2</span>(<span class="sc">-</span><span class="fl">2.3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;-2.3 no es múltiplo de dos&quot;</code></pre>
<div class="sourceCode" id="cb774"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb774-1"><a href="programacion.html#cb774-1" aria-hidden="true" tabindex="-1"></a><span class="fu">multiplo2</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;10 es múltiplo de dos&quot;</code></pre>
</div>
<div id="bucles-y-vectorización" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Bucles y vectorización</h2>
<div id="bucles" class="section level3" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> Bucles</h3>
<p><code>R</code> permite crear bucles repetitivos
(loops) y la ejecución condicional de sentencias. <code>R</code> admite bucles
<code>for</code>, <code>repeat</code> and <code>while</code>.</p>
<div id="el-bucle-for" class="section level4" number="11.3.1.1">
<h4><span class="header-section-number">11.3.1.1</span> El bucle <code>for</code></h4>
<p>La sintaxis de un bucle <code>for</code> es la que sigue:</p>
<div class="sourceCode" id="cb776"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb776-1"><a href="programacion.html#cb776-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> lista_de_valores)  { expresión }</span></code></pre></div>
<p>Por ejemplo, dado un vector <span class="math inline">\(x\)</span> se puede calcular <span class="math inline">\(y=x^2\)</span> con el código:</p>
<div class="sourceCode" id="cb777"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb777-1"><a href="programacion.html#cb777-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>, <span class="fl">0.5</span>)</span>
<span id="cb777-2"><a href="programacion.html#cb777-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">length</span>(x)</span>
<span id="cb777-3"><a href="programacion.html#cb777-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n) <span class="co"># Es necesario crear el objeto para acceder a los componentes...</span></span>
<span id="cb777-4"><a href="programacion.html#cb777-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) { y[i] <span class="ot">&lt;-</span> x[i] <span class="sc">^</span> <span class="dv">2</span> }</span>
<span id="cb777-5"><a href="programacion.html#cb777-5" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] -2.0 -1.5 -1.0 -0.5  0.0  0.5  1.0  1.5  2.0</code></pre>
<div class="sourceCode" id="cb779"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb779-1"><a href="programacion.html#cb779-1" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1] 4.00 2.25 1.00 0.25 0.00 0.25 1.00 2.25 4.00</code></pre>
<div class="sourceCode" id="cb781"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb781-1"><a href="programacion.html#cb781-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 4.00 2.25 1.00 0.25 0.00 0.25 1.00 2.25 4.00</code></pre>
<p>Otro ejemplo:</p>
<div class="sourceCode" id="cb783"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb783-1"><a href="programacion.html#cb783-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="fu">print</span>(i)</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>El siguiente código simula gráficamente el segundero de un
reloj:</p>
<div class="sourceCode" id="cb785"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb785-1"><a href="programacion.html#cb785-1" aria-hidden="true" tabindex="-1"></a>angulo <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">360</span>, <span class="at">by =</span> <span class="dv">6</span>)</span>
<span id="cb785-2"><a href="programacion.html#cb785-2" aria-hidden="true" tabindex="-1"></a>radianes <span class="ot">&lt;-</span> angulo <span class="sc">*</span> pi <span class="sc">/</span> <span class="dv">180</span></span>
<span id="cb785-3"><a href="programacion.html#cb785-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sin</span>(radianes)</span>
<span id="cb785-4"><a href="programacion.html#cb785-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">cos</span>(radianes)</span>
<span id="cb785-5"><a href="programacion.html#cb785-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb785-6"><a href="programacion.html#cb785-6" aria-hidden="true" tabindex="-1"></a>sec <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">6</span>, <span class="dv">61</span>, <span class="at">by =</span> <span class="dv">5</span>)</span>
<span id="cb785-7"><a href="programacion.html#cb785-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">61</span>) {</span>
<span id="cb785-8"><a href="programacion.html#cb785-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(x, y, <span class="at">axes =</span> <span class="cn">FALSE</span>, <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;&quot;</span>, <span class="at">type =</span> <span class="st">&#39;l&#39;</span>, <span class="at">col =</span> <span class="st">&#39;grey&#39;</span>)</span>
<span id="cb785-9"><a href="programacion.html#cb785-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">points</span>(x[i], y[i])</span>
<span id="cb785-10"><a href="programacion.html#cb785-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Añadir &quot;decoración&quot;</span></span>
<span id="cb785-11"><a href="programacion.html#cb785-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">text</span>(x[sec]<span class="sc">*</span><span class="fl">0.9</span>, y[sec]<span class="sc">*</span><span class="fl">0.9</span>, <span class="at">labels =</span> sec <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb785-12"><a href="programacion.html#cb785-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrows</span>(<span class="dv">0</span>, <span class="dv">0</span>, x[i]<span class="sc">*</span><span class="fl">0.85</span>, y[i]<span class="sc">*</span><span class="fl">0.85</span>, <span class="at">col =</span> <span class="st">&#39;blue&#39;</span>)</span>
<span id="cb785-13"><a href="programacion.html#cb785-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Esperar un segundo</span></span>
<span id="cb785-14"><a href="programacion.html#cb785-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(<span class="dv">1</span>)</span>
<span id="cb785-15"><a href="programacion.html#cb785-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="el-bucle-while" class="section level4" number="11.3.1.2">
<h4><span class="header-section-number">11.3.1.2</span> El bucle <code>while</code></h4>
<p>La sintaxis del bucle <code>while</code>
es la que sigue:</p>
<div class="sourceCode" id="cb786"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb786-1"><a href="programacion.html#cb786-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (condición lógica)  { expresión }</span></code></pre></div>
<p>Por ejemplo, si queremos calcular el primer número entero positivo cuyo
cuadrado no excede de 5000, podemos hacer:</p>
<div class="sourceCode" id="cb787"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb787-1"><a href="programacion.html#cb787-1" aria-hidden="true" tabindex="-1"></a>cuadrado <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb787-2"><a href="programacion.html#cb787-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb787-3"><a href="programacion.html#cb787-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (cuadrado <span class="sc">&lt;=</span> <span class="dv">5000</span>) {</span>
<span id="cb787-4"><a href="programacion.html#cb787-4" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> n <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb787-5"><a href="programacion.html#cb787-5" aria-hidden="true" tabindex="-1"></a>  cuadrado <span class="ot">&lt;-</span> n<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb787-6"><a href="programacion.html#cb787-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb787-7"><a href="programacion.html#cb787-7" aria-hidden="true" tabindex="-1"></a>cuadrado</span></code></pre></div>
<pre><code>## [1] 5041</code></pre>
<div class="sourceCode" id="cb789"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb789-1"><a href="programacion.html#cb789-1" aria-hidden="true" tabindex="-1"></a>n</span></code></pre></div>
<pre><code>## [1] 71</code></pre>
<div class="sourceCode" id="cb791"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb791-1"><a href="programacion.html#cb791-1" aria-hidden="true" tabindex="-1"></a>n<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 5041</code></pre>
<p><strong>Nota:</strong> Dentro de un bucle se puede emplear el comando <code>break</code> para terminarlo y el comando <code>next</code> para saltar a la siguiente iteración.</p>
</div>
</div>
<div id="vectorización" class="section level3" number="11.3.2">
<h3><span class="header-section-number">11.3.2</span> Vectorización</h3>
<p>Como hemos visto en <code>R</code> se pueden
hacer bucles. Sin embargo, es preferible evitar este tipo de estructuras
y tratar de utilizar <strong>operaciones vectorizadas</strong> que son mucho más
eficientes desde el punto de vista computacional.</p>
<p>Por ejemplo para sumar dos vectores se puede hacer con un <code>for</code>:</p>
<div class="sourceCode" id="cb793"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb793-1"><a href="programacion.html#cb793-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb793-2"><a href="programacion.html#cb793-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">1</span>)</span>
<span id="cb793-3"><a href="programacion.html#cb793-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">length</span>(x)</span>
<span id="cb793-4"><a href="programacion.html#cb793-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n)</span>
<span id="cb793-5"><a href="programacion.html#cb793-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb793-6"><a href="programacion.html#cb793-6" aria-hidden="true" tabindex="-1"></a>  z[i] <span class="ot">&lt;-</span> x[i] <span class="sc">+</span> y[i]</span>
<span id="cb793-7"><a href="programacion.html#cb793-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb793-8"><a href="programacion.html#cb793-8" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>## [1] 1 2 8 5</code></pre>
<p>Sin embargo, la operación anterior se podría hacer de modo más eficiente
en modo vectorial:</p>
<div class="sourceCode" id="cb795"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb795-1"><a href="programacion.html#cb795-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb795-2"><a href="programacion.html#cb795-2" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>## [1] 1 2 8 5</code></pre>
</div>
<div id="funciones-apply" class="section level3" number="11.3.3">
<h3><span class="header-section-number">11.3.3</span> Funciones <code>apply</code></h3>
<div id="la-función-apply" class="section level4" number="11.3.3.1">
<h4><span class="header-section-number">11.3.3.1</span> La función <code>apply</code></h4>
<p>Una forma de evitar la
utilización de bucles es utilizando la función <code>apply()</code> que permite
evaluar una misma función en todas las filas, columnas, …. de un array
de forma simultánea.</p>
<p>La sintaxis de esta función es:</p>
<div class="sourceCode" id="cb797"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb797-1"><a href="programacion.html#cb797-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(X, MARGIN, FUN, ...)</span></code></pre></div>
<ul>
<li><code>X</code>: matriz (o array)</li>
<li><code>MARGIN</code>: Un vector indicando las dimensiones donde se aplicará
la función. 1 indica filas, 2 indica columnas, y <code>c(1,2)</code> indica
filas y columnas.</li>
<li><code>FUN</code>: función que será aplicada.</li>
<li><code>...</code>: argumentos opcionales que serán usados por <code>FUN</code>.</li>
</ul>
<p>Veamos la utilización de la función <code>apply</code> con un ejemplo:</p>
<div class="sourceCode" id="cb798"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb798-1"><a href="programacion.html#cb798-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb798-2"><a href="programacion.html#cb798-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9</code></pre>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb800-1"><a href="programacion.html#cb800-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">1</span>, sum)    <span class="co"># Suma por filas</span></span></code></pre></div>
<pre><code>## [1] 12 15 18</code></pre>
<div class="sourceCode" id="cb802"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb802-1"><a href="programacion.html#cb802-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">2</span>, sum)    <span class="co"># Suma por columnas</span></span></code></pre></div>
<pre><code>## [1]  6 15 24</code></pre>
<div class="sourceCode" id="cb804"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb804-1"><a href="programacion.html#cb804-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">2</span>, min)    <span class="co"># Mínimo de las columnas</span></span></code></pre></div>
<pre><code>## [1] 1 4 7</code></pre>
<div class="sourceCode" id="cb806"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb806-1"><a href="programacion.html#cb806-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(x, <span class="dv">2</span>, range)  <span class="co"># Rango (mínimo y máximo) de las columnas</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    3    6    9</code></pre>
</div>
<div id="la-función-tapply" class="section level4" number="11.3.3.2">
<h4><span class="header-section-number">11.3.3.2</span> La función <code>tapply</code></h4>
<p>La function <code>tapply</code> es
similar a la función <code>apply</code> y permite aplicar una función a los datos desagregados,
utilizando como criterio los distintos niveles de una variable factor.
La sintaxis de esta función es como sigue:</p>
<div class="sourceCode" id="cb808"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb808-1"><a href="programacion.html#cb808-1" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tapply</span>(X, INDEX, FUN, ...,)</span></code></pre></div>
<ul>
<li><code>X</code>: matriz (o array).</li>
<li><code>INDEX</code>: factor indicando los grupos (niveles).</li>
<li><code>FUN</code>: función que será aplicada.</li>
<li><code>...</code>: argumentos opcionales .</li>
</ul>
<p>Consideremos, por ejemplo, el data.frame <code>ChickWeight</code> con datos de un
experimento relacionado con la repercusión de varias dietas en el peso
de pollos.</p>
<div class="sourceCode" id="cb809"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb809-1"><a href="programacion.html#cb809-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(ChickWeight)</span>
<span id="cb809-2"><a href="programacion.html#cb809-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ChickWeight)</span></code></pre></div>
<pre><code>##   weight Time Chick Diet
## 1     42    0     1    1
## 2     51    2     1    1
## 3     59    4     1    1
## 4     64    6     1    1
## 5     76    8     1    1
## 6     93   10     1    1</code></pre>
<div class="sourceCode" id="cb811"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb811-1"><a href="programacion.html#cb811-1" aria-hidden="true" tabindex="-1"></a>peso <span class="ot">&lt;-</span> ChickWeight<span class="sc">$</span>weight</span>
<span id="cb811-2"><a href="programacion.html#cb811-2" aria-hidden="true" tabindex="-1"></a>dieta <span class="ot">&lt;-</span> ChickWeight<span class="sc">$</span>Diet</span>
<span id="cb811-3"><a href="programacion.html#cb811-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(dieta) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Dieta 1&quot;</span>, <span class="st">&quot;Dieta 2&quot;</span>, <span class="st">&quot;Dieta 3&quot;</span>, <span class="st">&quot;Dieta 4&quot;</span>)</span>
<span id="cb811-4"><a href="programacion.html#cb811-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(peso, dieta, mean)  <span class="co"># Peso medio por dieta</span></span></code></pre></div>
<pre><code>##  Dieta 1  Dieta 2  Dieta 3  Dieta 4 
## 102.6455 122.6167 142.9500 135.2627</code></pre>
<div class="sourceCode" id="cb813"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb813-1"><a href="programacion.html#cb813-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(peso, dieta, summary)</span></code></pre></div>
<pre><code>## $`Dieta 1`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   35.00   57.75   88.00  102.65  136.50  305.00 
## 
## $`Dieta 2`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    39.0    65.5   104.5   122.6   163.0   331.0 
## 
## $`Dieta 3`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    39.0    67.5   125.5   142.9   198.8   373.0 
## 
## $`Dieta 4`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   39.00   71.25  129.50  135.26  184.75  322.00</code></pre>
<p>Otro ejemplo:</p>
<div class="sourceCode" id="cb815"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb815-1"><a href="programacion.html#cb815-1" aria-hidden="true" tabindex="-1"></a>provincia <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>))</span>
<span id="cb815-2"><a href="programacion.html#cb815-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(provincia) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;A Coruña&quot;</span>, <span class="st">&quot;Lugo&quot;</span>, <span class="st">&quot;Orense&quot;</span>, <span class="st">&quot;Pontevedra&quot;</span>)</span>
<span id="cb815-3"><a href="programacion.html#cb815-3" aria-hidden="true" tabindex="-1"></a>hijos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb815-4"><a href="programacion.html#cb815-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(provincia, hijos)</span></code></pre></div>
<pre><code>##     provincia hijos
## 1    A Coruña     1
## 2      Orense     2
## 3  Pontevedra     0
## 4        Lugo     3
## 5  Pontevedra     4
## 6      Orense     1
## 7        Lugo     0
## 8    A Coruña     0
## 9  Pontevedra     2
## 10     Orense     3
## 11       Lugo     1</code></pre>
<div class="sourceCode" id="cb817"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb817-1"><a href="programacion.html#cb817-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(hijos, provincia, mean) <span class="co"># Número medio de hijos por provincia</span></span></code></pre></div>
<pre><code>##   A Coruña       Lugo     Orense Pontevedra 
##   0.500000   1.333333   2.000000   2.000000</code></pre>
</div>
</div>
</div>
<div id="aplicación-validación-cruzada" class="section level2" number="11.4">
<h2><span class="header-section-number">11.4</span> Aplicación: validación cruzada</h2>
<p>Si deseamos evaluar la calidad predictiva de un modelo, lo ideal es disponer de
suficientes datos para poder hacer dos grupos con ellos: una muestra de entrenamiento
y otra de validación. Cuando hacer esto no es posible, disponemos como alternativa
de la <em>validación cruzada</em>, una herramienta que permite estimar los errores de
predicción utilizando una única muestra de datos. En su versión más simple (llamada
en inglés <em>leave-one-out</em>):</p>
<ul>
<li><p>se utilizan todos los datos menos uno para realizar el ajuste, y se mide su error de
predicción en el único dato no utilizado;</p></li>
<li><p>a continuación se repite el proceso
utilizando, uno a uno, todos los puntos de la muestra de datos;</p></li>
<li><p>y finalmente se combinan todos los errores en un único error de predicción.</p></li>
</ul>
<p>El proceso anterior se puede generalizar repartiendo los datos en distintos grupos,
más o menos del mismo tamaño, y sustituyendo en la explicación anterior dato por grupo.</p>
<div id="primer-ejemplo" class="section level3" number="11.4.1">
<h3><span class="header-section-number">11.4.1</span> Primer ejemplo</h3>
<p>Cuando disponemos de unos datos y los queremos ajustar utilizando un modelo que
depende de un parámetro, por ejemplo un modelo
de regresión polinómico que depende del grado del polinomio, podemos utilizar
la validación cruzada para seleccionar el grado del polinomio que debemos utilizar.</p>
<p>Veámoslo utilizando las variables <em>income</em> y <em>prestige</em> de la
base de datos <em>Prestige</em>, incluida en el paquete <em>car</em>.</p>
<div class="sourceCode" id="cb819"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb819-1"><a href="programacion.html#cb819-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span>
<span id="cb819-2"><a href="programacion.html#cb819-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(prestige <span class="sc">~</span> income, <span class="at">data =</span> Prestige, <span class="at">col =</span> <span class="st">&#39;darkgray&#39;</span>)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-42-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Representemos, gráficamente, los ajustes lineal, cuadrático y cúbico.</p>
<div class="sourceCode" id="cb820"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb820-1"><a href="programacion.html#cb820-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(prestige <span class="sc">~</span> income, <span class="at">data =</span> Prestige, <span class="at">col =</span> <span class="st">&#39;darkgray&#39;</span>)</span>
<span id="cb820-2"><a href="programacion.html#cb820-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajuste lineal</span></span>
<span id="cb820-3"><a href="programacion.html#cb820-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="fu">lm</span>(prestige <span class="sc">~</span> income, <span class="at">data =</span> Prestige))</span>
<span id="cb820-4"><a href="programacion.html#cb820-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajuste cuadrático</span></span>
<span id="cb820-5"><a href="programacion.html#cb820-5" aria-hidden="true" tabindex="-1"></a>modelo <span class="ot">&lt;-</span> <span class="fu">lm</span>(prestige <span class="sc">~</span> income <span class="sc">+</span> <span class="fu">I</span>(income<span class="sc">^</span><span class="dv">2</span>), <span class="at">data =</span> Prestige)</span>
<span id="cb820-6"><a href="programacion.html#cb820-6" aria-hidden="true" tabindex="-1"></a>parest <span class="ot">&lt;-</span> <span class="fu">coef</span>(modelo)</span>
<span id="cb820-7"><a href="programacion.html#cb820-7" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(parest[<span class="dv">1</span>] <span class="sc">+</span> parest[<span class="dv">2</span>]<span class="sc">*</span>x <span class="sc">+</span> parest[<span class="dv">3</span>]<span class="sc">*</span>x<span class="sc">^</span><span class="dv">2</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb820-8"><a href="programacion.html#cb820-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajuste cúbico</span></span>
<span id="cb820-9"><a href="programacion.html#cb820-9" aria-hidden="true" tabindex="-1"></a>modelo <span class="ot">&lt;-</span> <span class="fu">lm</span>(prestige <span class="sc">~</span> <span class="fu">poly</span>(income, <span class="dv">3</span>), <span class="at">data =</span> Prestige)</span>
<span id="cb820-10"><a href="programacion.html#cb820-10" aria-hidden="true" tabindex="-1"></a>valores <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">26000</span>, <span class="at">len =</span> <span class="dv">100</span>)</span>
<span id="cb820-11"><a href="programacion.html#cb820-11" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(modelo, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">income =</span> valores))</span>
<span id="cb820-12"><a href="programacion.html#cb820-12" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(valores, pred, <span class="at">lty =</span> <span class="dv">3</span>)</span>
<span id="cb820-13"><a href="programacion.html#cb820-13" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;bottomright&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;Lineal&quot;</span>,<span class="st">&quot;Cuadrático&quot;</span>,<span class="st">&quot;Cúbico&quot;</span>), <span class="at">lty =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-43-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Vamos a escribir una función que nos devuelva, para cada dato (fila) de
<em>Prestige</em>, la predicción en ese punto ajustando el modelo con todos los demás puntos.</p>
<div class="sourceCode" id="cb821"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb821-1"><a href="programacion.html#cb821-1" aria-hidden="true" tabindex="-1"></a>cv.lm <span class="ot">&lt;-</span> <span class="cf">function</span>(formula, datos) {</span>
<span id="cb821-2"><a href="programacion.html#cb821-2" aria-hidden="true" tabindex="-1"></a>      n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(datos)</span>
<span id="cb821-3"><a href="programacion.html#cb821-3" aria-hidden="true" tabindex="-1"></a>      cv.pred <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n)</span>
<span id="cb821-4"><a href="programacion.html#cb821-4" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb821-5"><a href="programacion.html#cb821-5" aria-hidden="true" tabindex="-1"></a>          modelo <span class="ot">&lt;-</span> <span class="fu">lm</span>(formula, datos[<span class="sc">-</span>i, ])</span>
<span id="cb821-6"><a href="programacion.html#cb821-6" aria-hidden="true" tabindex="-1"></a>          cv.pred[i] <span class="ot">&lt;-</span> <span class="fu">predict</span>(modelo, <span class="at">newdata =</span> datos[i, ])</span>
<span id="cb821-7"><a href="programacion.html#cb821-7" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb821-8"><a href="programacion.html#cb821-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(cv.pred)</span>
<span id="cb821-9"><a href="programacion.html#cb821-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Por último, calculamos el error de predicción (en este caso el <em>error cuadrático medio</em>)
en los datos de validación. Repetimos el proceso para cada valor del parámetro (grado del
ajuste polinómico) y minimizamos.</p>
<div class="sourceCode" id="cb822"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb822-1"><a href="programacion.html#cb822-1" aria-hidden="true" tabindex="-1"></a>grado <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb822-2"><a href="programacion.html#cb822-2" aria-hidden="true" tabindex="-1"></a>cv.error <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">5</span>)</span>
<span id="cb822-3"><a href="programacion.html#cb822-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(p <span class="cf">in</span> grado){</span>
<span id="cb822-4"><a href="programacion.html#cb822-4" aria-hidden="true" tabindex="-1"></a>  cv.pred <span class="ot">&lt;-</span> <span class="fu">cv.lm</span>(prestige <span class="sc">~</span> <span class="fu">poly</span>(income, p), Prestige)</span>
<span id="cb822-5"><a href="programacion.html#cb822-5" aria-hidden="true" tabindex="-1"></a>  cv.error[p] <span class="ot">&lt;-</span> <span class="fu">mean</span>((cv.pred <span class="sc">-</span> Prestige<span class="sc">$</span>prestige)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb822-6"><a href="programacion.html#cb822-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb822-7"><a href="programacion.html#cb822-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(grado, cv.error, <span class="at">pch=</span><span class="dv">16</span>)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-45-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb823"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb823-1"><a href="programacion.html#cb823-1" aria-hidden="true" tabindex="-1"></a>grado[<span class="fu">which.min</span>(cv.error)]</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
</div>
<div id="segundo-ejemplo" class="section level3" number="11.4.2">
<h3><span class="header-section-number">11.4.2</span> Segundo ejemplo</h3>
<p>En este segundo ejemplo vamos a aplicar una técnica de modelado <em>local</em> al problema de
regresión del ejemplo anterior.
El enfoque es <em>data-analytic</em> en el sentido de que no nos limitamos a una
familia de funciones que dependen de unos parámetros (enfoque paramétrico),
que son los que tenemos que determinar, sino que las funciones de
regresión están determinadas por los datos. Aun así, sigue habiendo un
parámetro que controla el proceso, cuyo valor debemos fijar siguiendo
algún criterio de optimalidad.</p>
<p>Vamos a realizar, utilizando la función <code>loess</code>, un <em>ajuste polinómico local
robusto</em>, que depende del parámetro <code>span</code>, que podemos interpretar como la
proporción de datos empleada en el ajuste.</p>
<p>Utilizando un valor <code>span=0.25</code>:</p>
<div class="sourceCode" id="cb825"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb825-1"><a href="programacion.html#cb825-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(prestige <span class="sc">~</span> income, Prestige, <span class="at">col =</span> <span class="st">&#39;darkgray&#39;</span>)</span>
<span id="cb825-2"><a href="programacion.html#cb825-2" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">loess</span>(prestige <span class="sc">~</span> income, Prestige, <span class="at">span =</span> <span class="fl">0.25</span>)</span>
<span id="cb825-3"><a href="programacion.html#cb825-3" aria-hidden="true" tabindex="-1"></a>valores <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">25000</span>, <span class="dv">100</span>)</span>
<span id="cb825-4"><a href="programacion.html#cb825-4" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">income =</span> valores))</span>
<span id="cb825-5"><a href="programacion.html#cb825-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(valores, pred)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-46-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Si utilizamos <code>span=0.5</code>:</p>
<div class="sourceCode" id="cb826"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb826-1"><a href="programacion.html#cb826-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(prestige <span class="sc">~</span> income, Prestige, <span class="at">col =</span> <span class="st">&#39;darkgray&#39;</span>)</span>
<span id="cb826-2"><a href="programacion.html#cb826-2" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">loess</span>(prestige <span class="sc">~</span> income, Prestige, <span class="at">span =</span> <span class="fl">0.5</span>)</span>
<span id="cb826-3"><a href="programacion.html#cb826-3" aria-hidden="true" tabindex="-1"></a>valores <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">25000</span>, <span class="dv">100</span>)</span>
<span id="cb826-4"><a href="programacion.html#cb826-4" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">income =</span> valores))</span>
<span id="cb826-5"><a href="programacion.html#cb826-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(valores, pred)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-47-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Nuestro objetivo es seleccionar un valor razonable para <code>span</code>, y lo vamos a
hacer utilizando validación cruzada y minimizando el error cuadrático medio
de la predicción en los datos de validación.</p>
<p>Utilizando la función</p>
<div class="sourceCode" id="cb827"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb827-1"><a href="programacion.html#cb827-1" aria-hidden="true" tabindex="-1"></a>cv.loess <span class="ot">&lt;-</span> <span class="cf">function</span>(formula, datos, p) {</span>
<span id="cb827-2"><a href="programacion.html#cb827-2" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(datos)</span>
<span id="cb827-3"><a href="programacion.html#cb827-3" aria-hidden="true" tabindex="-1"></a>  cv.pred <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n)</span>
<span id="cb827-4"><a href="programacion.html#cb827-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb827-5"><a href="programacion.html#cb827-5" aria-hidden="true" tabindex="-1"></a>    modelo <span class="ot">&lt;-</span> <span class="fu">loess</span>(formula, datos[<span class="sc">-</span>i, ], <span class="at">span =</span> p, </span>
<span id="cb827-6"><a href="programacion.html#cb827-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">control =</span> <span class="fu">loess.control</span>(<span class="at">surface =</span> <span class="st">&quot;direct&quot;</span>))</span>
<span id="cb827-7"><a href="programacion.html#cb827-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># control = loess.control(surface = &quot;direct&quot;) permite extrapolaciones</span></span>
<span id="cb827-8"><a href="programacion.html#cb827-8" aria-hidden="true" tabindex="-1"></a>    cv.pred[i] <span class="ot">&lt;-</span> <span class="fu">predict</span>(modelo, <span class="at">newdata =</span> datos[i, ])</span>
<span id="cb827-9"><a href="programacion.html#cb827-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb827-10"><a href="programacion.html#cb827-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(cv.pred)</span>
<span id="cb827-11"><a href="programacion.html#cb827-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>y procediendo de modo similar al caso anterior:</p>
<div class="sourceCode" id="cb828"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb828-1"><a href="programacion.html#cb828-1" aria-hidden="true" tabindex="-1"></a>ventanas <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.2</span>, <span class="dv">1</span>, <span class="at">len =</span> <span class="dv">10</span>)</span>
<span id="cb828-2"><a href="programacion.html#cb828-2" aria-hidden="true" tabindex="-1"></a>np <span class="ot">&lt;-</span> <span class="fu">length</span>(ventanas)</span>
<span id="cb828-3"><a href="programacion.html#cb828-3" aria-hidden="true" tabindex="-1"></a>cv.error <span class="ot">&lt;-</span> <span class="fu">numeric</span>(np)</span>
<span id="cb828-4"><a href="programacion.html#cb828-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(p <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>np){</span>
<span id="cb828-5"><a href="programacion.html#cb828-5" aria-hidden="true" tabindex="-1"></a>  cv.pred <span class="ot">&lt;-</span> <span class="fu">cv.loess</span>(prestige <span class="sc">~</span> income, Prestige, ventanas[p])</span>
<span id="cb828-6"><a href="programacion.html#cb828-6" aria-hidden="true" tabindex="-1"></a>  cv.error[p] <span class="ot">&lt;-</span> <span class="fu">mean</span>((cv.pred <span class="sc">-</span> Prestige<span class="sc">$</span>prestige)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb828-7"><a href="programacion.html#cb828-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cv.error[p] &lt;- median(abs(cv.pred - Prestige$prestige))</span></span>
<span id="cb828-8"><a href="programacion.html#cb828-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb828-9"><a href="programacion.html#cb828-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb828-10"><a href="programacion.html#cb828-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ventanas, cv.error)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-49-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>obtenemos la ventana “óptima” (en este caso el valor máximo):</p>
<div class="sourceCode" id="cb829"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb829-1"><a href="programacion.html#cb829-1" aria-hidden="true" tabindex="-1"></a>span <span class="ot">&lt;-</span> ventanas[<span class="fu">which.min</span>(cv.error)]</span>
<span id="cb829-2"><a href="programacion.html#cb829-2" aria-hidden="true" tabindex="-1"></a>span</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>y la correspondiente estimación:</p>
<div class="sourceCode" id="cb831"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb831-1"><a href="programacion.html#cb831-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(prestige <span class="sc">~</span> income, Prestige, <span class="at">col =</span> <span class="st">&#39;darkgray&#39;</span>)</span>
<span id="cb831-2"><a href="programacion.html#cb831-2" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">loess</span>(prestige <span class="sc">~</span> income, Prestige, <span class="at">span =</span> span)</span>
<span id="cb831-3"><a href="programacion.html#cb831-3" aria-hidden="true" tabindex="-1"></a>valores <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">25000</span>, <span class="dv">100</span>)</span>
<span id="cb831-4"><a href="programacion.html#cb831-4" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">income =</span> valores))</span>
<span id="cb831-5"><a href="programacion.html#cb831-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(valores, pred)</span></code></pre></div>
<p><img src="11-Programacion_files/figure-html/unnamed-chunk-51-1.png" width="70%" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="regresión-no-paramétrica.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="generación-de-informes.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rubenfcasal/intror/edit/master/11-Programacion.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Intro_Analisis_Datos_R.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
